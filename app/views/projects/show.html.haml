.span-12
  %h2 Recent commits
  %hr
  - @commits.each do |commit|
    %div.commit
      - if commit.author.email
        = image_tag gravatar_icon(commit.author.email), :class => "left", :width => 40, :style => "padding-right:5px;"
      - else
        = image_tag "no_avatar.png", :class => "left", :width => 40, :style => "padding-right:5px;"
      %p{:style => "margin-bottom: 3px;"}
        %strong
          = link_to truncate_commit_message(commit, 60), project_commit_path(@project, :id => commit.id) 
        
      %span
        %span
          [ #{commit.author} ]
        %cite
          = time_ago_in_words(commit.committed_date)
          ago
    %br
.span-11
  %h2 Recent Messages
  %hr
  - @messages.group_by{ |x| [x.noteable_id, x.noteable_type]}.each do |item, notes|
    %h3
      = noteable_link(item[0], item[1], @project)
    - notes.each do |note|
      %div.message
        .span-2
          &nbsp;
        = image_tag gravatar_icon(note.author.email), :class => "left", :width => 40, :style => "padding-right:5px;"
        %p{:style => "margin-bottom: 3px;"}
          = link_to truncate(note.note, :length => 50), "#" 
          - if note.attachment.url
            %br
            Attachment:
            = link_to note.attachment_identifier, note.attachment.url
            %br
        %span
          %span
            [ #{note.author.name} ]
          %cite
            = time_ago_in_words(note.created_at)
            ago
      %br

