%h3.page-title
  Users with access to this project

  - if can? current_user, :admin_team_member, @project
    %span.pull-right
      = link_to new_project_team_member_path(@project), class: "btn btn-new btn-grouped", title: "New project member" do
        New project member
      = link_to import_project_team_members_path(@project), class: "btn btn-grouped", title: "Import members from another project" do
        Import members

%p.light
  Read more about project permissions
  %strong= link_to "here", help_page_path("permissions", "permissions"), class: "vlink"
= render "team", members: @users_projects
- if @group
  = render "group_members"
- if @project_group_links.any?
  - @project_group_links.each do |group_links|
    - shared_group = group_links.group
    - shared_group_users_count = group_links.group.users_groups.count
    .panel.panel-default
      .panel-heading
        Shared with
        %strong #{shared_group.name}
        group, members with
        %strong #{group_links.human_access}
        role (#{shared_group_users_count})
        .pull-right
          = link_to members_group_path(shared_group), class: 'btn btn-small' do
            %i.icon-edit
      %ul.well-list
        - shared_group.users_groups.order('group_access DESC').limit(20).each do |member|
          = render 'users_groups/users_group', member: member, show_controls: false, show_roles: false
        - if shared_group_users_count > 20
          %li
            and #{shared_group_users_count - 20} more. For full list visit #{link_to 'group members page', members_group_path(shared_group)}
