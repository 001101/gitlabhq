%tr.deployment
  %td
    %strong= "##{environment.id}"

  %td
    %div.branch-commit
      - if deployment.ref
        = link_to last.ref, namespace_project_commits_path(@project.namespace, @project, deployment.ref), class: "monospace"
        &middot;
      = link_to deployment.short_sha, namespace_project_commit_path(@project.namespace, @project, deployment.sha), class: "commit-id monospace"

      %p
        %span
          - if commit_title = deployment.commit_title
            = link_to_gfm commit_title, namespace_project_commit_path(@project.namespace, @project, deployment.sha), class: "commit-row-message"
          - else
            Cant find HEAD commit for this branch

  %td
    - if deployment.deployable
      = link_to [@project.namespace.becomes(Namespace), @project, deployment.deployable], class: "monospace" do
        = "#{deployment.deployable.name} (##{deployment.deployable.id})"

  %td
    %p
      %i.fa.fa-calendar
      &nbsp;
      #{time_ago_with_tooltip(deployment.created_at)}

  %td
    - if can?(current_user, :update_deployment, @project) && deployment.deployable
      = link_to [@project.namespace.becomes(Namespace), @project, deployment.deployable, :retry], method: :post, title: 'Retry', class: 'btn btn-build'
