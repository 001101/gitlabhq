%tr.deployment
  %td
    %strong= "##{deployment.iid}"

  %td
    %div.branch-commit
      - if deployment.ref
        = link_to deployment.ref, namespace_project_commits_path(@project.namespace, @project, deployment.ref), class: "monospace"
        &middot;
      = link_to deployment.short_sha, namespace_project_commit_path(@project.namespace, @project, deployment.sha), class: "commit-id monospace"

      %p
        %span
          - if commit_title = deployment.commit_title
            = link_to_gfm commit_title, namespace_project_commit_path(@project.namespace, @project, deployment.sha), class: "commit-row-message"
          - else
            Cant find HEAD commit for this branch

  %td
    - if deployment.deployable
      = link_to namespace_project_build_path(@project.namespace, @project, deployment.deployable), class: "monospace" do
        = "#{deployment.deployable.name} (##{deployment.deployable.id})"

  %td
    #{time_ago_with_tooltip(deployment.created_at)}

  %td
    - if can?(current_user, :update_deployment, @project) && deployment.deployable
      .pull-right
        = link_to 'Retry', retry_namespace_project_build_path(@project.namespace, @project, deployment.deployable), method: :post, class: 'btn btn-build'
