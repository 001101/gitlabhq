- page_title "Container Registry"
= render "header_title"

%hr

%ul.content-list
  - if @tags.blank?
    %li
      .nothing-here-block No images in Container Registry for this project.

    .light.prepend-top-default
      %p
        A 'container image' is a snapshot of a container.
        You can host your container images with GitLab.
        %br
        To start using container images hosted on GitLab you first need to login:
        %pre
          %code
            docker login #{Gitlab.config.registry.host_port}
        %br
        Then you are free to create and upload a container images with build and push commands:
        %pre
          docker build -t #{escape_once(@project.container_registry_repository_url)} .
          %br
          docker push #{escape_once(@project.container_registry_repository_url)}

  - else
    .table-holder
      %table.table.builds
        %thead
          %tr
            %th Name
            %th Image ID
            %th Size
            %th Created
            %th

        - @tags.each do |tag|
          %tr
            %td
              = escape_once(tag.name)
              = clipboard_button(clipboard_text: "docker pull #{tag.path}")
            %td
              - if layer = tag.layers.first
                %span.has-tooltip(title="#{layer.revision}")
                  = layer.short_revision
              - else
                \-
            %td
              = number_to_human_size(tag.total_size)
              &middot;
              = pluralize(tag.layers.size, "layer")
            %td
              = time_ago_in_words(tag.created_at)
            %td.content
              .controls.hidden-xs.pull-right
                = link_to namespace_project_container_registry_path(@project.namespace, @project, tag.name), class: 'btn btn-remove has-tooltip', title: "Remove", data: { confirm: "Are you sure?" }, method: :delete do
                  = icon("trash cred")
