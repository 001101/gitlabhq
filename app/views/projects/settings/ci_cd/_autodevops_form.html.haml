.row.prepend-top-default
  .col-lg-12
    = form_for @project, url: project_settings_ci_cd_path(@project) do |f|
      = form_errors(@project)
      %fieldset.builds-feature
        .form-group
          - message = auto_devops_warning_message(@project)
          - if message
            %p.settings-message.text-center
              = message.html_safe
          = f.fields_for :auto_devops_attributes, @auto_devops do |form|
            .radio
              = form.label :enabled_true do
                = form.radio_button :enabled, 'true'
                %strong Enable Auto DevOps
                %br
                %span.descr
                  The Auto DevOps pipeline configuration will be used when there is no <code>.gitlab-ci.yml</code> in the project.

            .radio
              = form.label :enabled_false do
                = form.radio_button :enabled, 'false'
                %strong Disable Auto DevOps
                %br
                %span.descr
                  An explicit <code>.gitlab-ci.yml</code> needs to be specified before you can begin using Continuous Integration and Delivery.

            .radio
              = form.label :enabled_ do
                = form.radio_button :enabled, ''
                %strong Instance default (#{Gitlab::CurrentSettings.auto_devops_enabled? ? 'enabled' : 'disabled'})
                %br
                %span.descr
                  Follow the instance default to either have Auto DevOps enabled or disabled when there is no project specific <code>.gitlab-ci.yml</code>.

              %p.prepend-top-10.append-bottom-10
                You need to specify a domain if you want to use Auto Review Apps and Auto Deploy stages.
              = form.text_field :domain, class: 'form-control', placeholder: 'domain.com'

          = f.submit 'Save changes', class: "btn btn-save prepend-top-15"
