- commit = @repository.commit(tag.target)
- release = @releases.find { |release| release.tag == tag.name }
%li
  %div
    = link_to namespace_project_tag_path(@project.namespace, @project, tag.name) do
      %strong
        %i.fa.fa-tag
        = tag.name
    - if tag.message.present?
      &nbsp;
      = strip_gpg_signature(tag.message)
    - if release
      %span.label.label-success release

    .controls
      = link_to edit_namespace_project_tag_release_path(@project.namespace, @project, tag.name), class: 'btn-grouped btn' do
        = icon("pencil")
      - if can? current_user, :download_code, @project
        = render 'projects/repositories/download_archive', ref: tag.name, btn_class: 'btn-grouped btn-group-xs'
      - if can?(current_user, :admin_project, @project)
        = link_to namespace_project_tag_path(@project.namespace, @project, tag.name), class: 'btn btn-xs btn-remove remove-row grouped', method: :delete, data: { confirm: 'Removed tag cannot be restored. Are you sure?'}, remote: true do
          %i.fa.fa-trash-o

  - if commit
    = render 'projects/branches/commit', commit: commit, project: @project
  - else
    %p
      Cant find HEAD commit for this tag
  - if release && release.description.present?
    .description.prepend-top-default
      .wiki
        = preserve do
          = markdown release.description
