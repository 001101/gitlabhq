%board{ "inline-template" => true, "v-cloak" => true, "v-for" => "board in state.lists | orderBy 'position'", ":board" => "board" }
  .board{ ":class" => "{ 'is-draggable': !isPreset }" }
    .board-inner
      %header.board-inner-container.board-header{ ":class" => "{ 'has-border': board.label }", ":style" => "{ borderTopColor: (board.label ? board.label.color : null) }" }
        %h3.board-title.js-board-handle
          {{ board.title }}
          %span.pull-right{ "v-if" => "board.type !== 'blank'" }
            {{ board.issues.length }}
          %board-delete{ "inline-template" => true, "v-if" => "!isPreset", ":board-id" => "board.id" }
            %button.board-delete.has-tooltip.pull-right{ type: "button", title: "Delete list", "aria-label" => "Delete list", data: { placement: "bottom" }, "@click" => "deleteBoard" }
              = icon("trash")
      .board-inner-container.board-search-container{ "v-if" => "board.canSearch()" }
        %input.form-control{ type: "text", placeholder: "Search issues", "v-model" => "query", "debounce" => "250" }
        = icon("search", class: "board-search-icon", "v-show" => "!query")
        %button.board-search-clear-btn{ type: "button", role: "button", "aria-label" => "Clear search", "@click" => "clearSearch", "v-show" => "query" }
          = icon("times", class: "board-search-clear")
      %board-list{ "inline-template" => true,
        "v-if" => "board.type !== 'blank'",
        ":list" => "board",
        ":issues" => "board.issues",
        ":disabled" => "#{current_user.nil?}",
        ":loading" => "board.loading",
        ":issue-link-base" => "'#{namespace_project_issues_path(@project.namespace, @project)}'" }
        .board-list-loading.text-center{ "v-if" => "loading" }
          = icon("spinner spin")
        %ul.board-list{ "v-el:list" => true,
          "v-show" => "!loading",
          ":data-board" => "list.id" }
          = render "projects/boards/components/card"
      - if current_user
        = render "projects/boards/components/blank_state"
