- unless @branches.empty?
  %h5 Already Protected:
  %table.table.protected-branches-list
    %thead
      %tr
        %th{style: "border:0;"} Branch
        %th{style: "border:0;"} Developers can push
        %th{style: "border:0;"}

    %tbody
      - @branches.each do |branch|
        - @url = project_protected_branch_path(@project, branch)
        %tr
          %td
            = link_to project_commits_path(@project, branch.name) do
              %strong= branch.name
              - if @project.root_ref?(branch.name)
                %span.label.label-info default
            %td
              = check_box_tag "developers_can_push", branch.id, branch.developers_can_push, "data-url" => @url
            %td
              .pull-right
                - if can? current_user, :admin_project, @project
                  = link_to 'Unprotect', [@project, branch], data: { confirm: 'Branch will be writable for developers. Are you sure?' }, method: :delete, class: "btn btn-remove btn-small"
        %tr
          %td{style: "border:0;"}
            - if commit = branch.commit
              = link_to project_commit_path(@project, commit.id), class: 'commit_short_id' do
                = commit.short_id
              %span.light
                = gfm escape_once(truncate(commit.title, length: 40))
              #{time_ago_with_tooltip(commit.committed_date)}
            - else
              (branch was removed from repository)
          %td{style: "border:0;"}
          %td{style: "border:0;"}
