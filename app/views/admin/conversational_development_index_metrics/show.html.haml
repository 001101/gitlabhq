- @no_container = true
- page_title "ConvDev Index"
- cards = [ { id: 'issues', title: 'Issues', description: 'created per active user', blog: 'https://www2.deloitte.com/content/dam/Deloitte/se/Documents/technology-media-telecommunications/deloitte-digital-collaboration.pdf' },
  { id: 'comments', title: 'Comments', description: 'created per active user', score: '23.2', lead: '25.3', blog: 'http://conversationaldevelopment.com/why/' },
  { id: 'milestones', title: 'Milestones', description: 'created per active user', score: '23.2', lead: '25.3', blog: 'http://conversationaldevelopment.com/shorten-cycle/', docs: 'https://docs.gitlab.com/ee/workflow/milestones.html' },
  { id: 'boards', title: 'Boards', description: 'created per active user', score: '23.2', lead: '25.3', docs: 'https://docs.gitlab.com/ee/user/project/issue_board.html', blog: 'http://jpattonassociates.com/user-story-mapping/' },
  { id: 'merge_requests', title: 'Merge Requests', description: 'per active user', score: '23.2', lead: '25.3', docs: 'https://docs.gitlab.com/ee/user/project/merge_requests/index.html', blog: 'https://8thlight.com/blog/uncle-bob/2013/02/01/The-Humble-Craftsman.html' },
  { id: 'pipelines', title: 'Pipelines', description: 'created per active user', score: '23.2', lead: '25.3', blog: 'https://martinfowler.com/bliki/ContinuousDelivery.html', docs: 'https://docs.gitlab.com/ee/ci/README.html' },
  { id: 'environments', title: 'Environments', description: 'created per active user', score: '23.2', lead: '25.3', blog: 'https://about.gitlab.com/2016/08/26/ci-deployment-and-environments/', docs: 'https://docs.gitlab.com/ee/ci/environments.html' },
  { id: 'deployments', title: 'Deployments', description: 'created per active user', score: '23.2', lead: '25.3', blog: 'https://puppet.com/blog/continuous-delivery-vs-continuous-deployment-what-s-diff' },
  { id: 'monitoring', title: 'Monitoring', description: 'fraction of all projects', score: '23.2', lead: '25.3', blog: 'https://prometheus.io/docs/introduction/overview/', docs: 'https://docs.gitlab.com/ee/user/project/integrations/prometheus.html' },
  { id: 'service_desk', title: 'Service Desk', description: 'issues created per active user', score: '23.2', lead: '25.3', blog: 'http://blogs.forrester.com/kate_leggett/17-01-30-top_trends_for_customer_service_in_2017_operations_become_smarter_and_more_strategic', docs: 'https://docs.gitlab.com/ee/user/project/service_desk.html' },]
- i2p_steps = [ { title: 'Idea', score: 'average' },
  { title: 'Issue', score: 'average' },
  { title: 'Plan', score: 'average' },
  { title: 'Code', score: 'average' },
  { title: 'Commit', score: 'average' },
  { title: 'Test', score: 'average' },
  { title: 'Review', score: 'average' },
  { title: 'Staging', score: 'average' },
  { title: 'Production', score: 'average' },
  { title: 'Feedback', score: 'average' }]
- overall_score = 43.8
= render 'admin/background_jobs/head'

%div
  - if show_callout('convdev_intro_callout_dismissed')
    = render "admin/conversational_development_index_metrics/callout"

  .prepend-top-default
  - if !current_application_settings.usage_ping_enabled
    = render "admin/conversational_development_index_metrics/disabled"
  - elsif @conversational_development_index_metric.blank?
    = render "admin/conversational_development_index_metrics/no_data"
  - else
    .convdev.container
      .convdev-header.row
        - header_class = 'convdev-average-score'
        %h2.convdev-header-title{ class: header_class }
          = "#{overall_score}%"
        .convdev-header-subtitle
          index
          %br
          score
          = link_to icon('question-circle', 'aria-hidden' => 'true'), help_page_path('user/admin_area/monitoring/convdev')

      .convdev-cards.card-container.row
        - cards.each do |card|
          = render "admin/conversational_development_index_metrics/card", card: card

      .convdev-steps.row
        - i2p_steps.each_with_index do |step, index|
          .convdev-step{ class: "convdev-#{step[:score]}-score" }
            .as
              = custom_icon("i2p_step_#{index + 1}")
            %h4.convdev-step-title
              = step[:title]
