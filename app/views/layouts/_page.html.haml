%div{ class: "#{('page-with-sidebar' if show_new_nav? && defined?(@project))} #{page_gutter_class}" }
  - if show_new_nav? && defined?(@project)
    = render "layouts/nav/new_sidebar"
  - else
    - if defined?(nav) && nav
      .layout-nav
        .container-fluid
          = render "layouts/nav/#{nav}"
    - if content_for?(:sub_nav)
      = yield :sub_nav
  .content-wrapper{ class: "#{(layout_nav_class unless show_new_nav?) }" }
    .alert-wrapper
      = render "layouts/broadcast"
      = render "layouts/flash"
      = yield :flash_message
    %div{ class: "#{(container_class unless @no_container)} #{@content_class}" }
      .content{ id: "content-body" }
        = yield
