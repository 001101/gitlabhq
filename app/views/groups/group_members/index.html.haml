- page_title "Members"
- can_manage_members = can?(current_user, :admin_group_member, @group)

.row.prepend-top-default
  .col-lg-12
    %h4
      Group members
    - if can_manage_members
      %p
        You can add a new member to
        %strong= @group.name
        or share it with another group.
    - else
      %p
        Members can be added by project
        %i Maintainers
        or
        %i Owners
    .light
      - if can_manage_members
        %ul.nav-links.nav.nav-tabs.gitlab-tabs{ role: 'tablist' }
          %li.nav-tab{ role: 'presentation' }
            %a.nav-link.active{ href: '#add-member-pane', id: 'add-member-tab', data: { toggle: 'tab' }, role: 'tab' } Add member
          - #if @project.allowed_to_share_with_group?
          %li.nav-tab{ role: 'presentation' }
            %a.nav-link{ href: '#share-with-group-pane', id: 'share-with-group-tab', data: { toggle: 'tab' }, role: 'tab' } Share with group

        .tab-content.gitlab-tab-content
          .tab-pane.active{ id: 'add-member-pane', role: 'tabpanel' }
            = render 'groups/group_members/new_group_member', tab_title: 'Add member'
          .tab-pane{ id: 'share-with-group-pane', role: 'tabpanel' }
            = render 'groups/group_members/new_shared_group', tab_title: 'Share with group'

        = render 'shared/members/requests', membership_source: @group, requesters: @requesters

      .clearfix
        %h5.member.existing-title
          Existing members
      .card
        .card-header.flex-project-members-panel
          %span.flex-project-title
            Members with access to
            %strong= @group.name
          %span.badge= @members.total_count
          = form_tag group_group_members_path(@group), method: :get, class: 'form-inline member-search-form flex-project-members-form'  do
            .form-group
              .position-relative.append-right-8
                = search_field_tag :search, params[:search], { placeholder: 'Find existing members by name', class: 'form-control', spellcheck: false }
                %button.member-search-btn{ type: "submit", "aria-label" => "Submit search" }
                  = icon("search")
              - if can_manage_members
                = render 'shared/members/filter_2fa_dropdown'
              = render 'shared/members/sort_dropdown'
        %ul.content-list.members-list
          = render partial: 'shared/members/member', collection: @members, as: :member
        = paginate @members, theme: 'gitlab'
